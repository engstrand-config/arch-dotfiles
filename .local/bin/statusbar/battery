#!/bin/sh
# Optionally give a battery name (e.g. BAT0) as an argument

case $BLOCK_BUTTON in
    3) notify-send "ğŸ”‹ Battery module" "
ï‡¦: charging
âš¡: charged
â—: battery very low!" ;;
esac

BAT=${1:-"BAT0"}

capacity=$(cat /sys/class/power_supply/"$BAT"/capacity) || exit
status=$(cat /sys/class/power_supply/"$BAT"/status)
high="^c$(xgetres success)^"
low="^c$(xgetres critical)^"

color=$high
if [ "$status" = "Full" ]; then
	label="ï‰€"
elif [ "$status" = "Charging" ]; then
	label="ï‡¦"
else
  color=""
  if [ "$capacity" -ge 90 ]; then
  	label="ï‰€"
  elif [ "$capacity" -ge 65 ]; then
  	label="ï‰"
  elif [ "$capacity" -ge 40 ]; then
  	label="ï‰‚"
  elif [ "$capacity" -ge 15 ]; then
  	label="ï‰ƒ"
  else
    color=$low
    label="ï‰„"
  fi
fi

echo "$color$label $capacity %^d^"
